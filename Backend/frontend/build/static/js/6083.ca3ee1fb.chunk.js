"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6083],{6083:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var a=s(5043),n=s(6213),o=s(6133),r=s(6324),i=s(3003),l=s(8983),c=s(1828),d=s(2345),h=s(3471),u=s(1906),m=s(7260),p=s(2963),g=s.n(p),x=s(5393),_=s(579);const j=()=>{const e=(0,i.d4)((e=>{var t;return null===(t=e.userRecord)||void 0===t?void 0:t.UrlLink})),t=((0,i.d4)((e=>{var t;return null===(t=e.userRecord)||void 0===t?void 0:t.UserData})),(0,i.d4)((e=>{var t;return null===(t=e.userRecord)||void 0===t?void 0:t.toast}))),s=((0,i.wA)(),(0,i.d4)((e=>{var t;return null===(t=e.Frontoffice)||void 0===t?void 0:t.IP_DoctorWorkbenchNavigation})));console.log("IP_DoctorWorkbenchNavigation",s);const[p,j]=(0,a.useState)("Addtest"),[v,f]=(0,a.useState)(!1),[b,N]=(0,a.useState)("");console.log(e);const[A,k]=(0,a.useState)([]);(0,a.useEffect)((()=>{n.A.get("https://live.vesoftometic.co.in/usercontrol/test_and_group_forpackage",{headers:{tokenid:"7a5822b9-aaec-4f2c-a672-3e62d537683f",password:'U*5EEA/jxPM/@|,$0B>"'}}).then((e=>{P(e.data);const t=[...new Set(e.data.map((e=>e.testmethod)))];R(t)})).catch((e=>{console.error(e)}))}),[]);const[w,P]=(0,a.useState)([]),[y,R]=(0,a.useState)([]),[C,S]=(0,a.useState)(""),[D,I]=(0,a.useState)([]),[q,T]=(0,a.useState)(""),[E,B]=(0,a.useState)(""),[F,M]=(0,a.useState)([]);(0,a.useEffect)((()=>{n.A.get("".concat(e,"Ip_Workbench/get_external_patient_requests")).then((e=>{k(e.data)})).catch((e=>{console.error(e)}))}),[]);console.log(A),(0,a.useEffect)((()=>{if(C){const e=(e=>{const t=w.filter((t=>t.testmethod===e)).map((e=>({name:e.name,code:e.Test_Code})));return Array.from(new Map(t.map((e=>[e.name,e]))).values())})(C);I(e)}else I([])}),[C,w]);console.log(F);const O=[{key:"id",name:"S.No",frozen:!0},{key:"name",name:"Test Name"},{key:"code",name:"Test Code"},{key:"actions",name:"Actions",renderCell:e=>(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(u.A,{className:"cell_btn",onClick:()=>(e=>{console.log("Deleting row at index:",e),M((t=>{console.log("Previous state:",t);const s=t.filter(((t,s)=>t.code!==e.code));return console.log("New state:",s),s}))})(e.row),children:(0,_.jsx)(h.A,{className:"check_box_clrr_cancell"})})})}],z=F.map(((e,t)=>({id:t+1,name:e.name,code:e.code}))),U=()=>{f(!1),N("")},V=[{key:"id",name:"S.No",frozen:!0},{key:"requestid",name:"Request ID",frozen:!0},{key:"PatientId",name:"Patient ID"},{key:"PatientName",name:"Patient Name"},{key:"Phone_Number",name:"Phone Number"},{key:"Document3",name:"Document Three",renderCell:e=>(0,_.jsx)(u.A,{className:"cell_btn",onClick:()=>(e=>{console.log(e.row);const t=e.row.requestid;console.log(t),n.A.get("https://live.vesoftometic.co.in/Billing/get_external_report?Request_Id=".concat(t),{headers:{tokenid:"7a5822b9-aaec-4f2c-a672-3e62d537683f",password:'U*5EEA/jxPM/@|,$0B>"'}}).then((e=>{console.log("Full Response:",e.data),e.data&&e.data[0].Report?(console.log(e.data[0].Report),N(e.data[0].Report),f(!0)):alert("Report data is Pending")})).catch((e=>{console.error(e)}))})(e),children:(0,_.jsx)(m.A,{})})}],W=Array.isArray(A.data)?A.data.map(((e,t)=>({id:t+1,requestid:e.requestid,PatientId:e.PatientId,PatientName:e.PatientName,Phone_Number:e.Phone_Number}))):[];return(0,_.jsxs)("div",{className:"new-patient-registration-form",children:[(0,_.jsx)("br",{}),(0,_.jsxs)("div",{className:"for",style:{width:"100%"},children:[(0,_.jsx)("div",{style:{width:"100%",display:"grid",placeItems:"center"},children:(0,_.jsxs)(c.A,{value:p,exclusive:!0,onChange:(e,t)=>{null!==t&&t!==p&&j(t)},"aria-label":"Platform",children:[(0,_.jsx)(l.A,{value:"Addtest",style:{height:"30px",width:"180px",backgroundColor:"Addtest"===p?"var(--selectbackgroundcolor)":"inherit"},className:"togglebutton_container",children:"Add Test"}),(0,_.jsx)(l.A,{value:"ViewReport",style:{backgroundColor:"ViewReport"===p?"var(--selectbackgroundcolor)":"inherit",width:"180px",height:"30px"},className:"togglebutton_container",children:"View Report"})]})}),(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),"Addtest"===p&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"RegisFormcon_1",children:[(0,_.jsxs)("div",{className:"RegisForm_1",children:[(0,_.jsxs)("label",{style:{fontSize:"20px"},children:["Test Type ",(0,_.jsx)("span",{children:":"})]}),(0,_.jsxs)("select",{onChange:e=>S(e.target.value),value:C,name:"testType",children:[(0,_.jsx)("option",{value:"",children:"Select Test Method"}),y.map(((e,t)=>(0,_.jsx)("option",{value:e,children:e},t)))]})]}),(0,_.jsxs)("div",{className:"RegisForm_1",children:[(0,_.jsxs)("label",{style:{fontSize:"20px"},children:["Test Name ",(0,_.jsx)("span",{children:":"})]}),(0,_.jsx)("input",{list:"testnames",name:"testname",autoComplete:"off",value:q,onChange:e=>{const t=e.target.value;T(t);const s=D.find((e=>e.name===t));B(s?s.code:"")}}),(0,_.jsx)("datalist",{id:"testnames",children:D.map(((e,t)=>(0,_.jsx)("option",{value:e.name,children:e.name},t)))})]}),(0,_.jsx)("div",{className:"Main_container_Btn",children:(0,_.jsx)("button",{onClick:()=>{q&&E&&(M((e=>[...e,{name:q,code:E,type:C}])),T(""),B(""))},children:"ADD"})})]}),(0,_.jsx)("br",{}),F.length>0&&(0,_.jsx)("div",{className:"Main_container_app",children:(0,_.jsx)(o.A,{columns:O,RowData:z})}),(0,_.jsx)("div",{className:"Main_container_Btn",children:(0,_.jsx)("button",{onClick:()=>{const t={PatientId:s.PatientId,PatientName:s.PatientName,Age:s.Age,DOB:s.DOB,Gender:s.Gender,Phone_Number:s.PhoneNo,date_of_request:(new Date).toISOString().split("T")[0],Refering_Hospital:"RMC",status:"Pending",LabRequests:F.map((e=>({Test_Name:e.name,Test_Code:e.code})))};n.A.post("https://live.vesoftometic.co.in/Billing/External_hospital_investication_request",t,{headers:{tokenid:"7a5822b9-aaec-4f2c-a672-3e62d537683f",password:'U*5EEA/jxPM/@|,$0B>"'}}).then((t=>{const a=t.data;if(console.log("Response Data:",a),M([]),"success"===a.status){const t={PatientId:s.PatientId,PatientName:s.PatientName,Age:s.Age,DOB:s.DOB,Gender:s.Gender,Phone_Number:s.PhoneNo,date_of_request:(new Date).toISOString().split("T")[0],requestid:a.Request_Id};return n.A.post("".concat(e,"Ip_Workbench/create_external_patient_request"),t)}throw new Error("Request failed")})).then((e=>{console.log(e,"saved")})).catch((e=>{console.log("Error:",e)}))},children:"save"})})]}),(0,_.jsx)("br",{}),"ViewReport"===p&&(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("div",{className:"Main_container_app",children:(0,_.jsx)(o.A,{columns:V,RowData:W})})})]}),(0,_.jsx)(g(),{isOpen:v,onRequestClose:U,style:{content:{position:"absolute",inset:"100px",border:"1px solid rgb(204, 204, 204)",background:"rgb(97 90 90 / 75%)",overflow:"auto",borderRadius:"4px",outline:"none",padding:"0px"}},children:(0,_.jsxs)("div",{className:"pdf_img_show",children:[b.toLowerCase().startsWith("data:application/pdf;base64,")?(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("iframe",{title:"PDF Viewer",src:b,style:{width:"100%",height:"435px",border:"1px solid rgba(0, 0, 0, 0.5)"}})}):(0,_.jsx)("img",{src:b,alt:"Concern Form",style:{width:"80%",height:"75%",marginTop:"20px"}}),(0,_.jsx)("div",{className:"jhuhhjh",children:(0,_.jsx)(u.A,{style:{color:"white"},className:"clse_pdf_img",onClick:U,children:(0,_.jsx)(x.A,{style:{fontSize:"40px",backgroundColor:"#54d854bf",borderRadius:"40px"}})})})]})}),(0,_.jsx)(d.A,{}),(0,_.jsx)(r.A,{Message:t.message,Type:t.type})]})}}}]);
//# sourceMappingURL=6083.ca3ee1fb.chunk.js.map